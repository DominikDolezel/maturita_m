\section{Kombinatorika}
\begin{veta}[Pravidlo součtu]
    Nechť $M$ je konečná množina, $M_1, M_2, \dots M_k, k
    \in \mathbb N$ její podmnožiny takové, že
    \begin{enumerate}[$i.$]
    \item $M_1\cup M_2 \cup \dots \cup M_k = M,$
   	\item $M_i \cap M_j = \emptyset$ pro libovolná
    $i,j \in \left \{ 1,2,\dots,k \right \},i\ne j $.
    \end{enumerate}
    Pak platí $|M|=|M_1|+|M_2|+\dots +|M_k|,$ kde
    symbolem $|A|$ značíme počet prvků množiny $A$.
\end{veta}

\begin{veta}[Pravidlo součinu]
    Nechť $M_1, M_2, \dots, M_k, k\in \mathbb N$ jsou konečné množiny takové,
    že $|M_1| = m_1, |M_2|=m_2, \dots, |M_k| = m_k.$ Pak platí
    $$|M_1\times M_2 \times \dots \times M_k| = m_1m_2\dots m_k,$$
    kde  $M_1\times M_2\times \dots \times M_k= \left \{ \left [ a_1, a_2, \dots, a_k \right ]  \right \}
    , a_1\in M_1, a_2 \in M_2, \dots, a_k \in M_k.$
\end{veta}

\begin{veta}[Dirichletův princip]
    Má-li být alespoň $nk+1$ předmětů rozděleno do $k$ přihrádek, pak
    alespoň v jedné přihrádce je alespoň $n+1$ předmětů.
\end{veta}

\begin{definition}
    Nechť $M$ je neprázdná množina. \textbf{Rozklad množiny} $M$ značíme
    $\mathscr R(M)$ a definujeme jako neprázdný systém neprázdných podmnožin
    $M_1, M_2, \dots, M_k, k\in \mathbb N$ množiny $M,$ pro které platí
    \begin{enumerate}[$i.$]
    \item $M_1\cup M_2 \cup \dots \cup M_k = M,$
   	\item $M_i \cap M_j = \emptyset$ pro libovolná
    $i,j \in \left \{ 1,2,\dots,k \right \},i\ne j $.
    \end{enumerate}
    Množiny $M_1, M_2, \dots, M_k$ nazýváme \textbf{třídami rozkladu} $\mathscr R(M).$
\end{definition}

\begin{definition}
    Nechť $M$ je konečná $n$-prvková množina. Uspořádanou $n$-tici prvků z
    množiny $M$, v níž se každý prvek vyskytuje právě jednou, nazveme \textbf{pořadím
    (permutací) prvků} z množiny $M$. Počet všech pořadí z $n$ prvků označme $P(n).$
\end{definition}

\begin{veta}\label{vfakt}
    $\forall n \in \mathbb N:$
    \begin{equation}\label{fakt}
   P(n)=n(n-1)(n-2)\dots 1.
    \end{equation}
\end{veta}

\begin{definition}
    Výraz \ref{fakt} z věty \ref{vfakt} značíme
    $$n(n-1)(n-2)\dots 1=n!$$
    a nazýváme \textbf{$n$-faktoriál}. Pro $n=0$ položme $0! =1.$
\end{definition}

\begin{definition}
    Nechť je dáno $n_1$ prvků prvního druhu, $n_2$ prvků druhého druhu, \dots,
    $n_d$ prvků $d$-tého druhu, přičemž prvky téhož druhu považujeme za nerozlišitelné.
    Nechť $n_1+n_2+\dots+n_d=n.$ \textbf{Pořadím (permutací) s opakováním} z  $n_1$
    prvků prvního druhu, $n_2$ prvků druhého druhu, \dots, $n_d$ prvků $d$-tého druhu
    nazveme každou uspořádanou $n$-tici, která obsahuje $n_1$ prvků prvního druhu,
    $n_2$ prvků druhého druhu, \dots, $n_d$ prvků $d$-tého druhu. Počet všech pořadí
    označme $P_o(n_1, n_1, \dots, n_d).$
\end{definition}

\begin{veta}
    Nechť $n_1, n_2, \dots, n_d \in \mathbb N, n, n_1, n_2, \dots, n_d=n.$ Pak platí:
    $$P_o(n_1, n_1, \dots, n_d)=\frac{n!}{n_1!n_2!\dots n_d!}=
    \frac{\left ( \sum_{i=1}^d n_i \right )! }{\prod_{i=1}^d n_i!}.$$
\end{veta}

\begin{priklad}
Kolik různých slov lze vytvořit z písmen ABRAKADABRA?
\end{priklad}

\begin{reseni}
Máme $5\times$ A, $2\times $ B, $2\times$ R, $1\times$ D a $1\times $ K.
Počítáme tedy $P(5,2,2,1,1)=\frac{11!}{5!\cdot 2!\cdot 2!}=83160.$
\end{reseni}

\begin{definition}
    Nechť $M$ je konečná $n$-prvková množina. Nechť $k \in \mathbb N_0, k\leq n.$
    \textbf{$k$-prvkovou variací} z prvků množiny $M$ nazveme libovolnou
    uspořádanou $k$-tici, v níž se každý prvek vyskytuje nejvýše jednou. Počet
    všech $k$-prvkových variací z $n$ prvků označme $V(k,n).$
\end{definition}

\begin{veta}
    Nechť $k \in \mathbb N_0, k\leq n.$ Pak platí
    $$V(k,n)=\frac{n!}{(n-k)!}.$$
\end{veta}

\begin{definition}
    Nechť je dáno $n_1$ prvků prvního druhu, $n_2$ prvků druhého druhu, \dots,
    $n_d$ prvků $d$-tého druhu. Nechť $k\in \mathbb N, k \leq n_i, \forall
    i \in \left \{ 1, 2, \dots, d \right \} .$ \textbf{$k$-prvkovou variací s
    opakováním} z prvků daných $d$ druhů nazveme každou ušpořádanou $k$-tici
    vytvořenou z prvků těchto $d$ druhů. Počet těchto variací ozančme $V_o(k,d).$
\end{definition}

\begin{veta}
    $\forall k, d \in \mathbb N$ platí:
    $$V_o(k,d)=d^k.$$
\end{veta}

\begin{definition}
    Nechť $M$ je konečná $n$-prvková množina. Nechť $k \in \mathbb N_0, k\leq n.$
    Libovolnou $k$-prvkovou podmnožinu množiny $M$ nazýváme \textbf{$k$-prvkovou
    kombinaci prvků z množiny} $M$. Počet včech $k$-prvkových kombinací všech
    prvků značíme $K(k,n).$
\end{definition}

\begin{veta}\label{kombcislo}
    Nechť $k,n \in \mathbb N_0, k\leq n.$ Pak platí
    \begin{equation}\label{bc}
   K(k,n)=\frac{n!}{k!(n-k)!}.
    \end{equation}
\end{veta}

\begin{definition}
    Výraz \ref{bc} z věty \ref{kombcislo} značíme
    $$\frac{n!}{k!(n-k)!}=\binom{n}{k},$$
    čteme \uv{$n$ nad $k$} a nazýváme \textbf{kombinačním číslem} (též binomickým
    koeficientem).
\end{definition}

\begin{pozn}
    Platí
    \begin{align*}
        \binom{0}{0}=1, & & \binom{n}{0}=1, & & \binom{n}{n} = 1.
    \end{align*}
\end{pozn}

\begin{priklad}
V noclehárně je padesát lůžek. Určete, kolika způsoby se na ně může uložit
třicet pět nocležníků.
\end{priklad}

\begin{reseni}
Dvě hlediska:
\begin{enumerate}[1.]
\item hledisko správce ubytovny: je mu jedno, s kým kdo spí $\implies$ kombinace $\binom{50}{35}$
\item hledisko nocležníků: není jedno, s kým kdo spí $\implies \frac{50!}{15!}$
\end{enumerate}
\end{reseni}

\begin{veta}\label{binomvztahy}
    $\forall k,n \in \mathbb N_0, k\leq n:$
    \begin{align*}
        \binom{n}{k} &= \binom{n}{n-k} \\
        \binom{n}{k} + \binom{n}{k+1} &= \binom{n+1}{k+1}
    \end{align*}
\end{veta}

\begin{priklad}
Najděte všechna $x$, pro která platí
$$\binom{x-1}{x-3}+\binom{x-2}{x-4}=9.$$
\end{priklad}

\begin{reseni}
Řešíme podle věty \ref{binomvztahy} a podle definice kombinačního čísla.
\end{reseni}

\begin{definition}
    Nechť je dáno $n_1$ prvků prvního druhu, $n_2$ prvků druhého druhu, \dots,
    $n_d$ prvků $d$-tého druhu. Nechť $k\in \mathbb N: k\leq n_i, \forall i
    \in \left \{ 1,2,\dots,d \right \}$. \textbf{$k$-prvkovou kombinací s opakováním}
    z prvku daných $d$ druhů nazveme každou neuspořádanou $k$-tici vytvořenou z
    prvků těchto $d$ druhů. Počet všech těchto kombinací označme $K_o(k,d).$
\end{definition}

\begin{veta}
    $\forall k,d \in \mathbb N:$
    $$K_o(k,d)=P_o(k,d-1)=\binom{k+d-1}{d-1}.$$
\end{veta}

\begin{priklad}
V obchodě mají čtyři druhy kávy. Kolika způsoby lze pořídit nákup šesti balíčků?
\end{priklad}

\begin{reseni}
Každý nákup \uv{zašifrujeme} pomocí uspořádané devítice (4+6-1) tak, že napíšeme
tolik jedniček, kolik je prvního druhu a oddělíme nulou, tolik jedniček, kolik
je prvků druhého druhu a oddělíme nulou atd., konečně tolik jedniček,
kolik je prvků $d$-tého druhu. Např. $101100111$. Jde o bijekci šifry a nákupu.
Platí tedy
$$K_o(6,4)=P_o(6,3)=\frac{9!}{6!\cdot 3!}=\binom{9}{3}.$$
\end{reseni}

\begin{priklad}
Třicet pět výletníků si vybralo z dvanácti druhů jídel. Kolik existuje
různých druhů objednávek?
\end{priklad}

\begin{reseni}
\begin{enumerate}[$i.$]
\item hledisko kuchaře: je mu jedno, kdo si co objedná
$$K_o(35,12)=P_o(35,11)=\binom{46}{11}.$$
\item hledisko čišníka: záleží, kdo si co objedná
$$V_o(35,12)=12^{35}.$$
\end{enumerate}
\end{reseni}

\begin{priklad}
Ve třídě je dvacet chlapců a patnáct dívek. Určete, kolika způsoby z nich lze vybrat
šestičlennou delegaci, mají-li zde být
\begin{enumerate}[$a.$]
\item dvě dívky a čtyři chlapci,
\item nejvýše dvě dívky,
\item alespoň dvě dívky.
\end{enumerate}
\end{priklad}

\begin{reseni}
\begin{enumerate}[$a.$]
\item Je to
$$\underbrace{\binom{15}{2}}{\textrm{dívky}} \cdot \underbrace{\binom{20}{4}}{\textrm{chlapci}}.$$
\item Spočítáme zvlášť případy, kdy jedou dvě, jedna nebo žádná dívka a tyto počty sečteme.
\item Opět můžeme zvlášť počítat počty, kdy jede žádná, jedna, atd. dívek, ale jednodušší
je vzít celkový počet možnostía odečíst počet možností, kdy nejede žádná anebo jede
jedna dívka.
\end{enumerate}
\end{reseni}

\begin{veta}[Binomická věta]
    Pro všechna $a \in \mathbb N, a,b \in \mathbb R$ platí
    \begin{align*}
        (a+b)^n & = \binom{n}{0}a^nb^0 + \binom{n}{1}a^{n-1}b^1 + \binom{n}{2}
        a^{n-2}b^2 + \dots + \binom{n}{n}a^0b^n \\
        &= \sum_{k=0}^n \binom{n}{k}a^{n-k}b^k.
    \end{align*}
\end{veta}

\begin{pozn}[Pascalův trojúhelník]
    Napišme binomická čísla podle schémtu níže. Z věty \ref{binomvztahy} plyne,
    že každý člen tohoto schématu je součet jeho dvou bezprostředních sousedů nad ním.
    Navíc jsou čísla v $i$-tém řádku koeficienty binomického rozvoje $(a+b)^i.$

    \begin{minipage}{0.48\textwidth}
        \begin{gather*}
            \binom{0}{0} \\
            \binom{1}{0} \,\,\, \binom{1}{1} \\
            \binom{2}{0} \,\,\, \binom{2}{1} \,\,\, \binom{2}{2} \\
            \binom{3}{0} \,\,\, \binom{3}{1} \,\,\, \binom{3}{2} \,\,\, \binom{3}{3} \\
            \binom{4}{0} \,\,\, \binom{4}{1} \,\,\, \binom{4}{2} \,\,\, \binom{4}{3} \,\,\, \binom{4}{4} \\
            \binom{5}{0} \,\,\, \binom{5}{1} \,\,\, \binom{5}{2} \,\,\, \binom{5}{3} \,\,\, \binom{5}{4} \,\,\, \binom{5}{5} \\
            \dots
        \end{gather*}
    \end{minipage}
    \hfill
    \begin{minipage}{0.48\textwidth}
    \begin{gather*}
        1 \\
        1 \,\,\, 1 \\
        1 \,\,\, 2 \,\,\, 1 \\
        1 \,\,\, 3 \,\,\, 3 \,\,\, 1 \\
        1 \,\,\, 4 \,\,\, 6 \,\,\, 4 \,\,\, 1 \\
        1 \,\,\, 5 \,\,\, 10 \,\,\, 10 \,\,\, 5 \,\,\, 1 \\
        \dots
    \end{gather*}
    \end{minipage}


\end{pozn}

\begin{priklad}
Sečtěte:
\begin{enumerate}[$i$]
\item $S_1 = \binom{n}{0}+\binom{n}{1}+\dots+\binom{n}{n}$
\item $S_2= \binom{n}{0}-\binom{n}{1}+\binom{n}{2}+\dots+(-1)^n\binom{n}{n}$
\item $S_3= \binom{n}{0}+\binom{n}{2}+\binom{n}{4}+\dots$
\item $S_4= \binom{n}{1}+\binom{n}{3}+\dots$
\end{enumerate}
\end{priklad}

\begin{reseni}
\begin{enumerate}[$i.$]
\item To je vlastně počet všech podmnožin dvouprvkové množiny, tedy $S_1=2^n$. Jiným
způsobem: po dosazení do binomické věty pro $(1+1)^n$ dostaneme přesně rozvoj $S_1$,
a proto $S_1=2^n.$
\item Po dosazení do binomické věty pro $(1-1)^n$ dostáváme přesně rozvoj $S_2$,
takže $S_2=0.$
\item $S_3=\frac{S_1+S_2}{2}=\frac{(1+1)^n}{2}=2^{n-1}$
\item $S_4=\frac{S_1-S_2}{2}=2^{n-1}$
\end{enumerate}
\end{reseni}

\begin{priklad}
Určete absolutní člen v rozvoji výrazu $(2x^2-\frac{3}{x})^6$.
\end{priklad}

\begin{reseni}
Exponent u $2x^2$ označme $i$, exponent u $-\frac{3}{x}$ označme $j$. Absolutní člen má
exponent roven nule, tedy $2i-j=0$. Navíc v binomické větě platí $i+j=6$. To je
soustava dvou rovnic o dvou neznámých.
\end{reseni}

\begin{veta}
    Pro všechna $k,n \in \mathbb N$ platí
    $$\binom{k}{k} + \binom{k+1}{k}+\binom{k+2}{k}+\dots + \binom{k+n-1}{k}=
    \binom{k+n}{k+1}.$$
\end{veta}

\begin{veta}[Princip inkluze a exkluze]
    Nechť $M_1, M_2, M_2, \dots, M_k$ jsou konečné množiny. Pak platí
    \begin{align*}
        \left | \bigcup_{i=1}^k M_i \right | &= \sum_{i=1}^k \left | M_i \right |
        - \sum_{i=2}^k \left | M_1 \cap M_i \right | - \dots
        - \left | M_{k-1}\cap M_k \right | \\
        &+ \left | M_1\cap M_2 \cap M_3 \right | + \dots +
        \left | M_{k-2}\cap M_{k-1} \cap M_k \right | - \dots \\
        & + (-1)^{k+1} \left | M_1\cap M_2 \cap \dots \cap M_k \right |\\
        &= \sum (-1)^{r+1} \left | M_{j_1}\cap M_{j_2} \cap \dots \cap M_{j_r} \right |,
    \end{align*}
    kde se sčítá přes všechny neprázdné podmnožiny $\left \{ j_1, j_2, \dots,
   j_r \right \} $ množiny $\left \{ 1,2,\dots, r \right \}$.
\end{veta}

\begin{priklad}
Určete počet všech pořadí prvků $m_1,m_2,\dots,m_n$ s vlastností, že
pro každé $i\in \left \{ 1,2,\dots,n \right \} $ nestojí prvek $m_i$ na $i$-tém
místě.
\end{priklad}

\begin{reseni}
Označme hledaný počet jako $p_n$. Pak $p_n^\prime$ je počet všech pořadí,
kdy alespoň jeden prvek stojí na svém místě. Platí tedy
$$p_n+p_n^\prime = n! \implies p_n=n!-p_n^\prime.$$
Nechť $M_i$ je množina všech pořadí, v nichž prvek $m_i$ stojí na svém místě
$\forall i\in \left \{ 1,\dots,n \right \} $. Spočtěme počet těchto množin. Stojí-li
na svém místě
\begin{itemize}
\item jeden prvek ($i$-tý prvek na $i$-tém místě), těchto množin
je pro daný fixní prvek $|M_i|=(n-1)!$ a tento fixní prvek lze
vybrat $\binom{n}{1}$ způsoby,
\item dva prvky: těchto množin je pro dané dva fixní prvky $|M_i|=(n-2)!$ a tyto
dva fixní prvky lze vybrat $\binom{n}{2}$ způsoby,
\item $n$ prvků: tato množina je jedna a lze ji vybrat $\binom{n}{n}$ způsoby.
\end{itemize}
Celkově tedy máme
\begin{align*}
p_n^\prime & = |M_1\cup M_2\cup \dots \cup M_n|=\binom{n}{1}(n-1)!-\binom{n}{2}(n-2)!+\dots+(-1)^{n+1}(n-n)!\\
 &= \sum_{r=1}^n (-1)^{r+1}\binom{n}{r}(n-r)!,
\end{align*}
takže
\begin{align*}
    p_n &= n!-n! \sum_{r=1}^n(-1)^{r+1}\cdot \frac{1}{r!}=n!\left ( 1+\sum_{r=1} ^n (-1)^r\cdot \frac{1}{r!}\right )\\
   &= n!\sum_{r=0}^n (-1)^r \cdot \frac{1}{r!}=n!\left ( 1-\frac{1}{1!}+\frac{1}{2!}-\frac{1}{3!}+\dots + (-1)^n \frac{1}{n!}\right ).
\end{align*}

\end{reseni}
